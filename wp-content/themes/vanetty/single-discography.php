<?php
/*
Template Name: Single Audio
*/

get_header();
the_post();

$pochetteID = get_field('pochette');

$spotifyLink = get_field('spotify_link');
$deezerLink = get_field('deezer_link');
$itunesLink = get_field('itunes_link');

?>

<div class="header-image header-single-sound" style="background-image: url('<?php echo wp_get_attachment_image_src($pochetteID, '2000x800' )[0] ?>');">

    <div class="header-image__text">
        <?php echo get_the_title(); ?>

        <ul class="social">
            <?php if ($spotifyLink): ?>
                <li>
                    <a target="_blank" href="<?php echo $spotifyLink; ?>">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 305 305" style="enable-background:new 0 0 305 305;" xml:space="preserve" width="512px" height="512px">
                            <g id="XMLID_85_">
                                <path id="XMLID_86_" d="M152.441,0C68.385,0,0,68.39,0,152.453C0,236.568,68.385,305,152.441,305   C236.562,305,305,236.568,305,152.453C305,68.39,236.562,0,152.441,0z M75.08,208.47c17.674-5.38,35.795-8.108,53.857-8.108   c30.676,0,60.96,7.774,87.592,22.49c1.584,0.863,3.024,3.717,3.67,7.27c0.646,3.552,0.389,7.205-0.648,9.105   c-1.309,2.438-3.965,4.014-6.768,4.014c-1.389,0-2.61-0.312-3.831-0.972c-24.448-13.438-52.116-20.542-80.015-20.542   c-16.855,0-33.402,2.495-49.167,7.409c-0.768,0.233-1.558,0.352-2.348,0.352c-3.452,0.001-6.448-2.198-7.453-5.461   C68.612,219.566,71.419,209.667,75.08,208.47z M68.43,152.303c19.699-5.355,40.057-8.071,60.508-8.071   c36.765,0,73.273,8.896,105.601,25.739c2.266,1.15,3.936,3.1,4.701,5.49c0.776,2.421,0.542,5.024-0.669,7.347   c-2.885,5.646-6.257,9.44-8.393,9.44c-1.514,0-2.975-0.363-4.43-1.09c-30.019-15.632-62.59-23.558-96.811-23.558   c-19.035,0-37.71,2.503-55.489,7.435c-0.827,0.224-1.676,0.337-2.521,0.337c-4.277,0.001-8.046-2.888-9.162-7.013   C60.336,162.994,63.601,153.616,68.43,152.303z M66.727,115.606c-0.903,0.223-1.826,0.335-2.744,0.335   c-5.169,0.001-9.648-3.492-10.892-8.487c-1.559-6.323,2.397-13.668,8.126-15.111c22.281-5.473,45.065-8.248,67.72-8.248   c43.856,0,85.857,9.86,124.851,29.312c2.708,1.336,4.727,3.642,5.687,6.493c0.96,2.854,0.748,5.926-0.592,8.64   c-1.826,3.655-5.772,7.59-10.121,7.59c-1.677,0-3.399-0.393-4.924-1.109c-35.819-17.921-74.477-27.008-114.9-27.008   C108.164,108.014,87.234,110.568,66.727,115.606z" fill="#FFFFFF"/>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                        </svg>

                    </a>
            <?php endif; ?>
              </li>

              <?php if ($deezerLink): ?>
                  <li>
                      <a target="_blank" href="<?php echo $deezerLink; ?>">
                          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 97.75 97.75" style="enable-background:new 0 0 97.75 97.75;" xml:space="preserve">
                              <g>
                                  <path d="M48.875,0C21.883,0,0,21.882,0,48.875S21.883,97.75,48.875,97.75S97.75,75.868,97.75,48.875S75.867,0,48.875,0z    M25.676,69.248H12.365v-4.033h13.311V69.248z M25.676,64.006H12.365V59.97h13.311V64.006z M25.676,58.762H12.365v-4.035h13.311   V58.762z M25.676,53.516H12.365v-4.033h13.311V53.516z M25.676,48.271H12.365v-4.034h13.311V48.271z M40.604,69.248H27.291v-4.033   h13.313V69.248z M40.604,64.006H27.291V59.97h13.313V64.006z M40.604,58.762H27.291v-4.035h13.313V58.762z M55.531,69.248H42.219   v-4.033h13.313L55.531,69.248L55.531,69.248z M55.531,64.006H42.219V59.97h13.313L55.531,64.006L55.531,64.006z M55.531,58.762   H42.219v-4.035h13.313L55.531,58.762L55.531,58.762z M55.531,53.516H42.219v-4.033h13.313L55.531,53.516L55.531,53.516z    M55.531,48.271H42.219v-4.034h13.313L55.531,48.271L55.531,48.271z M55.531,43.026H42.219v-4.034h13.313L55.531,43.026   L55.531,43.026z M55.531,37.783H42.219v-4.035h13.313L55.531,37.783L55.531,37.783z M70.457,69.248H57.145v-4.033h13.313   L70.457,69.248L70.457,69.248z M70.457,64.006H57.145V59.97h13.313L70.457,64.006L70.457,64.006z M70.457,58.762H57.145v-4.035   h13.313L70.457,58.762L70.457,58.762z M70.457,53.516H57.145v-4.033h13.313L70.457,53.516L70.457,53.516z M70.457,48.271H57.145   v-4.034h13.313L70.457,48.271L70.457,48.271z M85.385,69.248H72.072v-4.033h13.312V69.248z M85.385,64.006H72.072V59.97h13.312   V64.006z M85.385,58.759H72.072v-4.034h13.312V58.759z M85.385,53.516H72.072V49.48h13.312V53.516z M85.385,48.271H72.072v-4.037   h13.312V48.271z M85.385,43.025H72.072v-4.033h13.312V43.025z M85.385,37.78H72.072v-4.033h13.312V37.78z M72.072,32.536v-4.034   h13.312v4.034H72.072z" fill="#FFFFFF"/>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                          </svg>
                      </a>
                  </li>
              <?php endif; ?>

              <?php if ($itunesLink): ?>
                  <li>
                      <a target="_blank" href="<?php echo $itunesLink; ?>">
                          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 90 90" style="enable-background:new 0 0 90 90;" xml:space="preserve">
                              <g>
                                  <path id="iTunes" d="M45,0C20.148,0,0,20.148,0,45c0,24.852,20.148,45,45,45c24.852,0,45-20.148,45-45C90,20.148,69.852,0,45,0z    M45,81C25.119,81,9,64.881,9,45S25.119,9,45,9s36,16.119,36,36S64.881,81,45,81z M61.48,57.059   c0.289,3.828-2.584,7.313-6.422,7.791c-3.832,0.476-7.185-2.24-7.472-6.067c-0.293-3.823,2.59-7.313,6.422-7.787   c1.214-0.149,2.373,0.019,3.41,0.438V32.639l-18,3.348v23.48h-0.035c0.008,0.066,0.025,0.127,0.025,0.193   c0.291,3.828-2.584,7.309-6.416,7.787c-3.84,0.475-7.18-2.241-7.471-6.064c-0.295-3.828,2.58-7.316,6.416-7.787   c1.213-0.154,2.373,0.019,3.41,0.443V26.974v-0.005l26.113-4.46l0.025-0.009v0.004l0.01-0.004l-0.01,0.119v34.25h-0.035   C61.463,56.936,61.475,56.992,61.48,57.059z" fill="#FFFFFF"/>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                              <g>
                              </g>
                          </svg>
                      </a>
                  </li>
              <?php endif; ?>
          </ul>
    </div>

    <div id="waveform"></div>

    <button type="button" name="button" class="play-pause"></button>

</div>



<div class="container-discrography-single text-center">
    <ul class="list-sound text-left">

        <?php

        if( have_rows('list_song') ):
            while ( have_rows('list_song') ) : the_row();
            ?>
                <li>
                    <a href="<?php echo get_sub_field('upload'); ?>">
                        <span class="title">
                            <?php echo the_sub_field('title'); ?>
                        </span>
                        <span class="author">
                            <?php echo the_sub_field('auteur'); ?>
                        </span>
                    </a>
                </li>

            <?php endwhile;
        endif;
        ?>
    </ul>
</div>


<canvas id="noise" class="noise"></canvas>
